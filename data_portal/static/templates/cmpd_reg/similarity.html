{% extends "cmpd_reg/base.html" %}
{% load staticfiles %}

{% block title %}
Similarity
{% endblock title %}

{% block body %}
	<h1>Similarity Search</h1>
	<div class="row">
		<div class="container col-lg-6">
			<div id="jsme_container"></div>
			<button type="button" id="get-smiles" class="btn btn-primary">Get SMILES</button>
			<form role="form" action="/similarity/" method="post">
				{% csrf_token %}
				<fieldset>
					<section class="col col-lg-4">
            <div class="form-group">
              <label for="showSmiles">SMILES Input</label>
              <textarea rows="10" cols="70" class="form-control" id="show-smiles" name="smiles"></textarea>
            </div>
          </section>
				</fieldset>
				<div class="form-actions">
       				 <input type="submit" id="get-cmpd-image" class="btn btn-success" value="Retrieve Compound Image" />
      			</div>
			</form>
		</div>
		<div class="container col-lg-6">
			<div class="panel panel-default">
	  			<div class="panel-heading">Query Results</div>
	  			<div class="panel-body">
	  				
			</div>
		</div>
	</div>
{% endblock body %}
{% block scripts %}
<script>
    //this function will be called after the JavaScriptApplet code has been loaded.
    function jsmeOnLoad() {
        jsmeApplet = new JSApplet.JSME("jsme_container", "480px", "440px"); 
   }
   $('#get-smiles').click(function(event){
        var smiles = jsmeApplet.smiles();
        console.log(smiles);
        $('#show-smiles').val(smiles);
    });
   // $('#get-cmpd-image').click(function(event){
   //      var smiles = jsmeApplet.smiles();
   //      console.log("Requesting image for structure: "+smiles);
   //  });

</script>
{% endblock scripts %}